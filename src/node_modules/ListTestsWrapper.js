import React from "react"
import ReactDOM from 'react-dom';

import {Global} from "Global.js";

import {ShowCurrentTest} from "ShowCurrentTest.js";

import { useSelector, useDispatch } from "react-redux";

//import {ShowTest} from "ShowTest.js";

//let global = Global();

//Tests Menu 
//export function ListTestsWrapper(props) {
export function ListTestsWrapper() {

  let dispatch = useDispatch();
  
  let count_questions_test = useSelector(state => state.count_questions_test);
  

//  constructor(props) {
  let  arr_state_test = Array(count_questions_test);
  
  for(let i=0; i<count_questions_test; i++) {arr_state_test[i] = true;}
  
  arr_state_test[0] = false;
//    super(props);
//    this.handleChange = this.handleChange.bind(this);
//    this.state = (
//      {state_test: arr_state_test,
//       state_edit: false
//      }
//    ); //arr_state_test
//  }
  
  dispatch({type: 'SHOW_TESTS_MENU', state_test: arr_state_test, state_edit: false};

  function showTest(numberTest) {
  
    count_correct_answer = Array(count_questions_test).fill(0);  // count of correct answers for every question
    
    count_time_question = Array(count_questions_test).fill('00:00');  // all time for the current question

    count_time_test = Array(count_questions_test).fill('00:00'); // all time for the current test

    selected_answer = -1;  // number of the selected answer in the current question

    correct_answer = -1;  // number of the correct answer in the current question  
    
    current_question = 0;  // number of current question ( 0  -  first)

//    console.log('showTest:  global.count_time_test=',global.count_time_test);    
//console.log('numberTest=',numberTest);

    document.getElementById('header_menu_tests').style.textDecoration = "underline";

    document.getElementById('words_wrapper').style = {visibility: 'hide'};

//console.log('numberTest=',numberTest);
    currentTest = numberTest; // current test

    dispatch({type: 'SHOW_TESTS_MENU', count_correct_answer: count_correct_answer, count_time_question: count_time_question,
      count_time_test: count_time_test, selected_answer: selected_answer, correct_answer: correct_answer, current_question: current_question};

    function ShowTestWork() {
        return <ShowCurrentTest />;
    }//---end of ShowTestWork
   
   ReactDOM.render(<ShowTestWork />, document.getElementById('tests_wrapper'));

  } //----end of  showTest(numberTest) {

  function noVisibilityTests(e) {
      document.getElementById('list_tests_wrapper').style.visibility = 'hidden';
  //    e.target.style.background = 'red';
  }//end of noVisibilityTests---------------------------------

//  render() {
//console.log('111 render this.state.state_test=',this.state.state_test);    
//console.log('111 render global.count_questions_test=',global.count_questions_test) 
//console.log('111 render global.currentTest=',global.currentTest)

//    if(this.state.state_edit){
//      this.showTest(global.currentTest);
//    }
    
    let work1, arr=[];
    let k;     
    for(let i = 1; i <= global.tests.length; i++){
      work1 = "TEST" + i;
      k = i - 1;
      arr[i] = <div key={work1} id={work1} className="menu_test" fontSize="11px" onClick={this.showTest.bind(this,k)}>{work1}</div>
    }
    return (<div id="list_tests_wrapper" onMouseLeave={this.noVisibilityTests}> {arr} </div>)
    
//  }//render

}  

