import {Global} from "Global.js";
import {SumMinSec} from "SumMinSec.js";
let global = Global();
// StartWatch4 -  timer of common time for the choosing question; insert in ID_TIME element
//    numberTest - Test number, ID_time_test - ID for test time, time_test - time of all test
export function StartWatch4(ID_TIME, numberTestWork, ID_time_test, time_test) {  
  //console.log('ID_TIME=',ID_TIME, '  numberTestWork=',numberTestWork); 
  //console.log('ID_time_test=',ID_time_test, '  time_test=',time_test); 
  // Update the count down every 1 second
    let work;
    global.X_setInterval = setInterval(function() {
  //console.log('444  time_test=',time_test); 
    // Get today's date and time
      let now = new Date().getTime();
  //console.log('1 now ==== ', now);	
    // Find the distance between now and the count down date
      let distance = now - global.countDownDate_qst;
  //console.log('1 distance ==== ', distance);	
    // Time calculations for days, hours, minutes and seconds
      let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      let seconds = Math.floor((distance % (1000 * 60)) / 1000);
  
    // Display the result in the element with id="demo"
  //  document.getElementById(ID_TIME).innerHTML = days + "d " + hours + "h "
  //  + minutes + "m " + seconds + "s ";
  //console.log('1 ID_TIME ==== ', ID_TIME,  '   minutes = ' + minutes, '   seconds = ' + seconds);	
      work = document.getElementById(ID_TIME);
      if (minutes < 10) {
        minutes = '0' + minutes;
      }
      if (seconds < 10) {
        seconds = '0' + seconds;
      }
      global.count_time_question = minutes + ":" + seconds;
  //console.log('minutes = '+minutes, 'seconds = '+seconds);      
  //console.log('count_time_question = '+count_time_question);  
      if(work !== null) {
        work.innerHTML = global.count_time_question; 
      }
  
    // If the count down is finished, write some text
      if (distance < 0) {
        clearInterval(global.X_setInterval);
        if(document.getElementById(ID_TIME) !== null) {
          document.getElementById(ID_TIME).innerHTML = "EXPIRED";
        } 
      }
  
      work = document.getElementById(ID_time_test);
    
      let work2 = SumMinSec(time_test, global.count_time_question);
  
      if(work !== null) {
        work.innerHTML = work2;
      }
  
  
    }, 1000);
  }
  