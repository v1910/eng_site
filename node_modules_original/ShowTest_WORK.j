import React from "react"

import {Global} from "Global.js";

import {StartWatch4} from "StartWatch4.js";
//import {ShowTest1} from "ShowTest1.js";

let global = Global();

// ShowTest - Test with number nTest
export function ShowTest(numberTest) {
  //	let question_test = document.getElementById("question_test");
  //	let node = document.createElement("p");                 // Create a <a> node
  //	let textnode = document.createTextNode("TEST"+numberTest);         // Create p text node
  //	node.setAttribute('class', 'p_tests');
  //	let func = 'showTest(' + testN + ')'
  //	node.setAttribute('href', "#");
  //	node.setAttribute('onclick', func);
  //	node.appendChild(textnode);                              // Append the text to <p>
  //	document.getElementById("dropdown-p").appendChild(node);     // Append <p> to dropdown-a	
    global.curentTest = numberTest; // curent test
  console.log('numberTest=',numberTest);
  console.log('global.curentTest=',global.curentTest);

    if(document.getElementById("test_wrapper"))
      document.getElementById("test_wrapper").innerHTML = ""; // clean tests
    if(document.getElementById("wrapper"))
      document.getElementById("wrapper").innerHTML = ""; // clean words
    if(document.getElementById("jokes_wrapper"))
      document.getElementById("jokes_wrapper").innerHTML = ""; // clean jokes

    let question_cont;
    let classList = document.body.classList;
    
    let jokes_wrapper = document.getElementById("jokes_wrapper");
    // not show  WORDS
    let wrapper = document.getElementById("wrapper");
    if(wrapper) wrapper.style.display = "none";
    
    // show  TESTS
    let test_wrapper = document.getElementById("test_wrapper");
    if(test_wrapper) test_wrapper.style.display = "block";
    
    global.countDownDate = new Date().getTime(); // start time for the chosing test
    global.countDownDate_qst = new Date().getTime(); // start time for the chosing question
    global.count_correct_answer = 0;  // count of correct answers
    
    let questions_test = global.tests[numberTest-1];
    if(questions_test)  global.count_questions_test = questions_test.length
    else  global.count_questions_test = 0;
    let tests_wrapper = document.getElementById("test_wrapper");
    let func = '';
    let j = 0;
    let si;
    let ID_time; // ID for time_test
    let ID_time_qst; // ID for time_tests_qst
    let ID_work;
    
    //remove content of class `question_cont`
//    $(".question_cont").remove();
    if(classList.contains("question_cont"))
      classList.remove("question_cont");
    
    for(let ii=0; ii < global.count_questions_test; ii++) { // show all questions for the test
      // add new question in id=tests_wrapper
      
      // add <div class="question_cont">
      let question = questions_test[ii];
      let node = document.createElement("div"); 
      node.setAttribute('class', "question_cont");
      ID_work = 'ID'+ ii + numberTest*100 +  '_question_cont';
      node.setAttribute("id", ID_work);
      if (ii !== 0) {
        node.setAttribute("style", "opacity: .3;"); // hide all questions except 0
      }
      if (tests_wrapper) tests_wrapper.appendChild(node);     // Append <div> to tests_wrapper
      
      // add style: -webkit-user-select
  //console.log('ID_work=',ID_work)    
    
  //console.log('_question_cont=',question_cont.style)
  
      // add <div class="question_test">
//      let question_cont = $("#test_wrapper").children(".question_cont")[ii];
//      let question_cont = document.classList.children(".question_cont")[ii];
      let elements = document.getElementById("#test_wrapper");
      if(elements) {
        elements = elements.children; 
        let question_cont = elements.getElementsByClassName("question_cont")[ii]; 
        node = document.createElement("div");		
        node.innerHTML  =  questions_test[ii].Q;
        node.setAttribute('class', "question_test");
        ID_work = 'ID'+ ii + numberTest*100 +  '_question_test';
        node.setAttribute("id", ID_work);		
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
      
      // add <ui class="answer_test"> 
//      let work = $("#test_wrapper").children(".question_cont");
//      let work = document.getElementById("#test_wrapper").children(".question_cont"); 
//      var elements = document.getElementsByClassName(names)    
      elements = document.getElementById("#test_wrapper");
      if(elements){
        elements = elements.children;
        let work = elements.getElementsByClassName("question_cont");
        question_cont = work[ii]; 
        node = document.createElement("ul");
        node.setAttribute('class', "answer_test");		
        let arr_val = Object.values(question);
        for(let i=3; i < arr_val.length; i++){
          j = i - 3;
          func = 'li_answer(' + j + ',' + ii + ',' + numberTest + ')';
          node.innerHTML  += '<li id="id' + (ii*10 + j) + '" '  + 'class="li_class" onclick="' + func + '">' + arr_val[i] + '</li>';
        }	
        question_cont.appendChild(node);     // Append <ui> to question_cont	
      }
      // add <div class="footer_question">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii]; 
      question_cont = document.getElementById("#test_wrapper"); 
      if(question_cont){
        question_cont = question_cont.children; 
        question_cont = question_cont.getElementsByClassName("question_cont")[ii];
        node = document.createElement("div");		
        node.setAttribute('class', "footer_question");	
        ID_work = 'ID'+ ii + numberTest*100 +  '_footer_question';
        node.setAttribute("id", ID_work);
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
  
      // add <button class="button_test">  WHY
//      question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild;
      question_cont = document.getElementById("#test_wrapper");
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii].lastElementChild;
        node = document.createElement("button");		
        node.setAttribute('class', "button_test");
        ID_work = 'ID'+ ii + numberTest*100 +  '_button_test';
        node.setAttribute("id", ID_work);
        node.innerHTML  = 'WHY'; 		
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
  
      // add <div class="number_question">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild;
      question_cont = document.getElementById("#test_wrapper");
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii].lastElementChild
        node = document.createElement("div");		
        node.setAttribute('class', "number_question");
        ID_work = 'ID'+ ii + numberTest*100 +  '_number_question';
        node.setAttribute("id", ID_work);		
        node.innerHTML  = ii+1 + '/' + Global.count_questions_test;
        if(ii < 9)  node.style.width = '26px'
        else node.style.width = '35px';
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
  
  
      // add <div class="correct_answers">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild;
      question_cont = document.getElementById("#test_wrapper");
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii].lastElementChild;
        node = document.createElement("div");		
        node.setAttribute('class', "correct_answers");
        ID_work = 'ID'+ ii + numberTest*100 +  '_correct_answers';
        node.setAttribute("id", ID_work);
        si = ii.toString();
        if(Global.count_correct_answer >= 0) {
          switch (si.length) {
            case 1:
              node.innerHTML  =  '/' + Global.count_correct_answer; 		
              break;
            case 2:
              node.innerHTML  = '/\u00A0' + global.count_correct_answer; 		
              break;
            case 3:
              node.innerHTML  = '/\u00A0' + global.count_correct_answer; 		
              break;				
            default:
              node.innerHTML  = '/\u00A0' + global.count_correct_answer; 		
          }
        }
        else 	node.innerHTML  = '\u00A0'; 		
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
  
      // add <div class="time_question">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild;
      question_cont = document.getElementById("#test_wrapper");
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii].lastElementChild;
        node = document.createElement("div");
        ID_time_qst = 'ID'+ ii + numberTest*100 +  '_time_question';
        node.setAttribute("id", ID_time_qst);		
        node.setAttribute('class', "time_question");
        node.innerHTML  = '00:00'; 		
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
      // add <div class="time_test">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild;
      question_cont = document.getElementById("#test_wrapper");
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii].lastElementChild;
        node = document.createElement("div");
        ID_time = 'ID'+ ii + numberTest*100 + '_time_test';
        node.setAttribute("id", ID_time);		
        node.setAttribute('class', "time_test");
        node.innerHTML  = '00:00'; 		
        question_cont.appendChild(node);     // Append <div> to question_cont   
      }
      // add <div class="space_question">
//      question_cont = $("#test_wrapper").children(".question_cont")[ii]; 
      question_cont = document.getElementById("#test_wrapper"); 
      if(question_cont){
        question_cont = question_cont.children;
        question_cont = question_cont.getElementsByClassName("question_cont")[ii];
        node = document.createElement("div");		
        node.setAttribute('class', "space_question");
        ID_time = 'ID'+ ii + numberTest*100 + '_space_question';
        node.setAttribute("id", ID_time);	
        question_cont.appendChild(node);     // Append <div> to question_cont
      }
  
  //question_cont = $("#test_wrapper").children(".question_cont")[ii].lastElementChild; 
  //  document.getElementById("demo").innerHTML = c[2].text;
  //console.log('question_cont  =',question_cont);
    
  
    }  //---- for(let ii=0; ii < Global.count_questions_test; ii++)
    
  //  console.log('numberTest=',numberTest);
    
    global.countDownDate_qst = new Date().getTime(); // start time for the chosing question
  
    ID_time = 'ID'+ global.nQst + numberTest*100 + '_time_question';
    ID_time_qst = 'ID'+ global.nQst + numberTest*100 + '_time_test';
  //console.log('222 count_time_test=',count_time_test);  
    StartWatch4(ID_time, numberTest, ID_time_qst, global.count_time_test); // start time for 0-th question 
   
  } //---- function showTest(numberTest) {
  